///|
let glyphs : Map[String, @fonts.Glyph] = {
  "A": {
    char: "A",
    horiz_adv_x: 0.0,
    gerber_lp: "dc",
    d: "M507 24L48 24L48 530L395 530L395 625L48 625L48 723L507 723L507 24ZM395 269L395 433L138 433L138 269L395 269Z",
    xmin: 48.0,
    ymin: 24.0,
    xmax: 507.0,
    ymax: 723.0,
  },
  "B": {
    char: "B",
    horiz_adv_x: 0.0,
    gerber_lp: "dc",
    d: "M507 21L48 21L48 723L160 723L160 530L507 530L507 21ZM417 269L417 433L160 433L160 269L417 269Z",
    xmin: 48.0,
    ymin: 21.0,
    xmax: 507.0,
    ymax: 723.0,
  },
  "C": {
    char: "C",
    horiz_adv_x: 0.0,
    gerber_lp: "d",
    d: "M507 21L48 21L48 723L507 723L507 625L160 625L160 269L507 269L507 21Z",
    xmin: 48.0,
    ymin: 21.0,
    xmax: 507.0,
    ymax: 723.0,
  },
}

///|
let nullpointer : @fonts.Font = {
  id: "nullpointer",
  horiz_adv_x: 540.0,
  units_per_em: 1000.0,
  ascent: 800.0,
  descent: -200.0,
  glyphs,
}

///|
struct GenPathTestCase {
  name : String
  anchor : @fonts.Anchor
  y_up : Bool
  want_d : String
}

///|
let test_cases : Array[GenPathTestCase] = [
  {
    name: "Unchanged",
    anchor: Unchanged,
    y_up: false,
    want_d: "M507 -24L48 -24L48 -530L395 -530L395 -625L48 -625L48 -723L507 -723L507 -24ZM395 -269L395 -433L138 -433L138 -269L395 -269ZM1047 -21L588 -21L588 -723L700 -723L700 -530L1047 -530L1047 -21ZM957 -269L957 -433L700 -433L700 -269L957 -269ZM1587 -21L1128 -21L1128 -723L1587 -723L1587 -625L1240 -625L1240 -269L1587 -269L1587 -21ZM507 1179L48 1179L48 477L160 477L160 670L507 670L507 1179ZM417 931L417 767L160 767L160 931L417 931ZM1047 1179L588 1179L588 477L1047 477L1047 575L700 575L700 931L1047 931L1047 1179ZM1587 2379L1128 2379L1128 1677L1587 1677L1587 1775L1240 1775L1240 2131L1587 2131L1587 2379Z",
  },
  {
    name: "Unchanged with y_up",
    anchor: Unchanged,
    y_up: true,
    want_d: "M507 24L48 24L48 530L395 530L395 625L48 625L48 723L507 723L507 24ZM395 269L395 433L138 433L138 269L395 269ZM1047 21L588 21L588 723L700 723L700 530L1047 530L1047 21ZM957 269L957 433L700 433L700 269L957 269ZM1587 21L1128 21L1128 723L1587 723L1587 625L1240 625L1240 269L1587 269L1587 21ZM507 -1179L48 -1179L48 -477L160 -477L160 -670L507 -670L507 -1179ZM417 -931L417 -767L160 -767L160 -931L417 -931ZM1047 -1179L588 -1179L588 -477L1047 -477L1047 -575L700 -575L700 -931L1047 -931L1047 -1179ZM1587 -2379L1128 -2379L1128 -1677L1587 -1677L1587 -1775L1240 -1775L1240 -2131L1587 -2131L1587 -2379Z",
  },
  {
    name: "TopLeft",
    anchor: TopLeft,
    y_up: false,
    want_d: "M459 699L0 699L0 193L347 193L347 98L0 98L0 0L459 0L459 699ZM347 454L347 290L90 290L90 454L347 454ZM999 702L540 702L540 0L652 0L652 193L999 193L999 702ZM909 454L909 290L652 290L652 454L909 454ZM1539 702L1080 702L1080 0L1539 0L1539 98L1192 98L1192 454L1539 454L1539 702ZM459 1902L0 1902L0 1200L112 1200L112 1393L459 1393L459 1902ZM369 1654L369 1490L112 1490L112 1654L369 1654ZM999 1902L540 1902L540 1200L999 1200L999 1298L652 1298L652 1654L999 1654L999 1902ZM1539 3102L1080 3102L1080 2400L1539 2400L1539 2498L1192 2498L1192 2854L1539 2854L1539 3102Z",
  },
  {
    name: "TopLeft with y_up",
    anchor: TopLeft,
    y_up: true,
    want_d: "M459 -699L0 -699L0 -193L347 -193L347 -98L0 -98L0 0L459 0L459 -699ZM347 -454L347 -290L90 -290L90 -454L347 -454ZM999 -702L540 -702L540 0L652 0L652 -193L999 -193L999 -702ZM909 -454L909 -290L652 -290L652 -454L909 -454ZM1539 -702L1080 -702L1080 0L1539 0L1539 -98L1192 -98L1192 -454L1539 -454L1539 -702ZM459 -1902L0 -1902L0 -1200L112 -1200L112 -1393L459 -1393L459 -1902ZM369 -1654L369 -1490L112 -1490L112 -1654L369 -1654ZM999 -1902L540 -1902L540 -1200L999 -1200L999 -1298L652 -1298L652 -1654L999 -1654L999 -1902ZM1539 -3102L1080 -3102L1080 -2400L1539 -2400L1539 -2498L1192 -2498L1192 -2854L1539 -2854L1539 -3102Z",
  },
  {
    name: "TopCenter",
    anchor: TopCenter,
    y_up: false,
    want_d: "M-310.5 699L-769.5 699L-769.5 193L-422.5 193L-422.5 98L-769.5 98L-769.5 0L-310.5 0L-310.5 699ZM-422.5 454L-422.5 290L-679.5 290L-679.5 454L-422.5 454ZM229.5 702L-229.5 702L-229.5 0L-117.5 0L-117.5 193L229.5 193L229.5 702ZM139.5 454L139.5 290L-117.5 290L-117.5 454L139.5 454ZM769.5 702L310.5 702L310.5 0L769.5 0L769.5 98L422.5 98L422.5 454L769.5 454L769.5 702ZM-310.5 1902L-769.5 1902L-769.5 1200L-657.5 1200L-657.5 1393L-310.5 1393L-310.5 1902ZM-400.5 1654L-400.5 1490L-657.5 1490L-657.5 1654L-400.5 1654ZM229.5 1902L-229.5 1902L-229.5 1200L229.5 1200L229.5 1298L-117.5 1298L-117.5 1654L229.5 1654L229.5 1902ZM769.5 3102L310.5 3102L310.5 2400L769.5 2400L769.5 2498L422.5 2498L422.5 2854L769.5 2854L769.5 3102Z",
  },
  {
    name: "TopCenter with y_up",
    anchor: TopCenter,
    y_up: true,
    want_d: "M-310.5 -699L-769.5 -699L-769.5 -193L-422.5 -193L-422.5 -98L-769.5 -98L-769.5 0L-310.5 0L-310.5 -699ZM-422.5 -454L-422.5 -290L-679.5 -290L-679.5 -454L-422.5 -454ZM229.5 -702L-229.5 -702L-229.5 0L-117.5 0L-117.5 -193L229.5 -193L229.5 -702ZM139.5 -454L139.5 -290L-117.5 -290L-117.5 -454L139.5 -454ZM769.5 -702L310.5 -702L310.5 0L769.5 0L769.5 -98L422.5 -98L422.5 -454L769.5 -454L769.5 -702ZM-310.5 -1902L-769.5 -1902L-769.5 -1200L-657.5 -1200L-657.5 -1393L-310.5 -1393L-310.5 -1902ZM-400.5 -1654L-400.5 -1490L-657.5 -1490L-657.5 -1654L-400.5 -1654ZM229.5 -1902L-229.5 -1902L-229.5 -1200L229.5 -1200L229.5 -1298L-117.5 -1298L-117.5 -1654L229.5 -1654L229.5 -1902ZM769.5 -3102L310.5 -3102L310.5 -2400L769.5 -2400L769.5 -2498L422.5 -2498L422.5 -2854L769.5 -2854L769.5 -3102Z",
  },
  {
    name: "TopRight",
    anchor: TopRight,
    y_up: false,
    want_d: "M-1080 699L-1539 699L-1539 193L-1192 193L-1192 98L-1539 98L-1539 0L-1080 0L-1080 699ZM-1192 454L-1192 290L-1449 290L-1449 454L-1192 454ZM-540 702L-999 702L-999 0L-887 0L-887 193L-540 193L-540 702ZM-630 454L-630 290L-887 290L-887 454L-630 454ZM0 702L-459 702L-459 0L0 0L0 98L-347 98L-347 454L0 454L0 702ZM-1080 1902L-1539 1902L-1539 1200L-1427 1200L-1427 1393L-1080 1393L-1080 1902ZM-1170 1654L-1170 1490L-1427 1490L-1427 1654L-1170 1654ZM-540 1902L-999 1902L-999 1200L-540 1200L-540 1298L-887 1298L-887 1654L-540 1654L-540 1902ZM0 3102L-459 3102L-459 2400L0 2400L0 2498L-347 2498L-347 2854L0 2854L0 3102Z",
  },
  {
    name: "TopRight with y_up",
    anchor: TopRight,
    y_up: true,
    want_d: "M-1080 -699L-1539 -699L-1539 -193L-1192 -193L-1192 -98L-1539 -98L-1539 0L-1080 0L-1080 -699ZM-1192 -454L-1192 -290L-1449 -290L-1449 -454L-1192 -454ZM-540 -702L-999 -702L-999 0L-887 0L-887 -193L-540 -193L-540 -702ZM-630 -454L-630 -290L-887 -290L-887 -454L-630 -454ZM0 -702L-459 -702L-459 0L0 0L0 -98L-347 -98L-347 -454L0 -454L0 -702ZM-1080 -1902L-1539 -1902L-1539 -1200L-1427 -1200L-1427 -1393L-1080 -1393L-1080 -1902ZM-1170 -1654L-1170 -1490L-1427 -1490L-1427 -1654L-1170 -1654ZM-540 -1902L-999 -1902L-999 -1200L-540 -1200L-540 -1298L-887 -1298L-887 -1654L-540 -1654L-540 -1902ZM0 -3102L-459 -3102L-459 -2400L0 -2400L0 -2498L-347 -2498L-347 -2854L0 -2854L0 -3102Z",
  },
  {
    name: "CenterLeft",
    anchor: CenterLeft,
    y_up: false,
    want_d: "M459 -852L0 -852L0 -1358L347 -1358L347 -1453L0 -1453L0 -1551L459 -1551L459 -852ZM347 -1097L347 -1261L90 -1261L90 -1097L347 -1097ZM999 -849L540 -849L540 -1551L652 -1551L652 -1358L999 -1358L999 -849ZM909 -1097L909 -1261L652 -1261L652 -1097L909 -1097ZM1539 -849L1080 -849L1080 -1551L1539 -1551L1539 -1453L1192 -1453L1192 -1097L1539 -1097L1539 -849ZM459 351L0 351L0 -351L112 -351L112 -158L459 -158L459 351ZM369 103L369 -61L112 -61L112 103L369 103ZM999 351L540 351L540 -351L999 -351L999 -253L652 -253L652 103L999 103L999 351ZM1539 1551L1080 1551L1080 849L1539 849L1539 947L1192 947L1192 1303L1539 1303L1539 1551Z",
  },
  {
    name: "CenterLeft with y_up",
    anchor: CenterLeft,
    y_up: true,
    want_d: "M459 852L0 852L0 1358L347 1358L347 1453L0 1453L0 1551L459 1551L459 852ZM347 1097L347 1261L90 1261L90 1097L347 1097ZM999 849L540 849L540 1551L652 1551L652 1358L999 1358L999 849ZM909 1097L909 1261L652 1261L652 1097L909 1097ZM1539 849L1080 849L1080 1551L1539 1551L1539 1453L1192 1453L1192 1097L1539 1097L1539 849ZM459 -351L0 -351L0 351L112 351L112 158L459 158L459 -351ZM369 -103L369 61L112 61L112 -103L369 -103ZM999 -351L540 -351L540 351L999 351L999 253L652 253L652 -103L999 -103L999 -351ZM1539 -1551L1080 -1551L1080 -849L1539 -849L1539 -947L1192 -947L1192 -1303L1539 -1303L1539 -1551Z",
  },
  {
    name: "Center",
    anchor: Center,
    y_up: false,
    want_d: "M-310.5 -852L-769.5 -852L-769.5 -1358L-422.5 -1358L-422.5 -1453L-769.5 -1453L-769.5 -1551L-310.5 -1551L-310.5 -852ZM-422.5 -1097L-422.5 -1261L-679.5 -1261L-679.5 -1097L-422.5 -1097ZM229.5 -849L-229.5 -849L-229.5 -1551L-117.5 -1551L-117.5 -1358L229.5 -1358L229.5 -849ZM139.5 -1097L139.5 -1261L-117.5 -1261L-117.5 -1097L139.5 -1097ZM769.5 -849L310.5 -849L310.5 -1551L769.5 -1551L769.5 -1453L422.5 -1453L422.5 -1097L769.5 -1097L769.5 -849ZM-310.5 351L-769.5 351L-769.5 -351L-657.5 -351L-657.5 -158L-310.5 -158L-310.5 351ZM-400.5 103L-400.5 -61L-657.5 -61L-657.5 103L-400.5 103ZM229.5 351L-229.5 351L-229.5 -351L229.5 -351L229.5 -253L-117.5 -253L-117.5 103L229.5 103L229.5 351ZM769.5 1551L310.5 1551L310.5 849L769.5 849L769.5 947L422.5 947L422.5 1303L769.5 1303L769.5 1551Z",
  },
  {
    name: "Center with y_up",
    anchor: Center,
    y_up: true,
    want_d: "M-310.5 852L-769.5 852L-769.5 1358L-422.5 1358L-422.5 1453L-769.5 1453L-769.5 1551L-310.5 1551L-310.5 852ZM-422.5 1097L-422.5 1261L-679.5 1261L-679.5 1097L-422.5 1097ZM229.5 849L-229.5 849L-229.5 1551L-117.5 1551L-117.5 1358L229.5 1358L229.5 849ZM139.5 1097L139.5 1261L-117.5 1261L-117.5 1097L139.5 1097ZM769.5 849L310.5 849L310.5 1551L769.5 1551L769.5 1453L422.5 1453L422.5 1097L769.5 1097L769.5 849ZM-310.5 -351L-769.5 -351L-769.5 351L-657.5 351L-657.5 158L-310.5 158L-310.5 -351ZM-400.5 -103L-400.5 61L-657.5 61L-657.5 -103L-400.5 -103ZM229.5 -351L-229.5 -351L-229.5 351L229.5 351L229.5 253L-117.5 253L-117.5 -103L229.5 -103L229.5 -351ZM769.5 -1551L310.5 -1551L310.5 -849L769.5 -849L769.5 -947L422.5 -947L422.5 -1303L769.5 -1303L769.5 -1551Z",
  },
  {
    name: "CenterRight",
    anchor: CenterRight,
    y_up: false,
    want_d: "M-1080 -852L-1539 -852L-1539 -1358L-1192 -1358L-1192 -1453L-1539 -1453L-1539 -1551L-1080 -1551L-1080 -852ZM-1192 -1097L-1192 -1261L-1449 -1261L-1449 -1097L-1192 -1097ZM-540 -849L-999 -849L-999 -1551L-887 -1551L-887 -1358L-540 -1358L-540 -849ZM-630 -1097L-630 -1261L-887 -1261L-887 -1097L-630 -1097ZM0 -849L-459 -849L-459 -1551L0 -1551L0 -1453L-347 -1453L-347 -1097L0 -1097L0 -849ZM-1080 351L-1539 351L-1539 -351L-1427 -351L-1427 -158L-1080 -158L-1080 351ZM-1170 103L-1170 -61L-1427 -61L-1427 103L-1170 103ZM-540 351L-999 351L-999 -351L-540 -351L-540 -253L-887 -253L-887 103L-540 103L-540 351ZM0 1551L-459 1551L-459 849L0 849L0 947L-347 947L-347 1303L0 1303L0 1551Z",
  },
  {
    name: "CenterRight with y_up",
    anchor: CenterRight,
    y_up: true,
    want_d: "M-1080 852L-1539 852L-1539 1358L-1192 1358L-1192 1453L-1539 1453L-1539 1551L-1080 1551L-1080 852ZM-1192 1097L-1192 1261L-1449 1261L-1449 1097L-1192 1097ZM-540 849L-999 849L-999 1551L-887 1551L-887 1358L-540 1358L-540 849ZM-630 1097L-630 1261L-887 1261L-887 1097L-630 1097ZM0 849L-459 849L-459 1551L0 1551L0 1453L-347 1453L-347 1097L0 1097L0 849ZM-1080 -351L-1539 -351L-1539 351L-1427 351L-1427 158L-1080 158L-1080 -351ZM-1170 -103L-1170 61L-1427 61L-1427 -103L-1170 -103ZM-540 -351L-999 -351L-999 351L-540 351L-540 253L-887 253L-887 -103L-540 -103L-540 -351ZM0 -1551L-459 -1551L-459 -849L0 -849L0 -947L-347 -947L-347 -1303L0 -1303L0 -1551Z",
  },
  {
    name: "BaselineLeft",
    anchor: BaselineLeft,
    y_up: false,
    want_d: "M459 -24L0 -24L0 -530L347 -530L347 -625L0 -625L0 -723L459 -723L459 -24ZM347 -269L347 -433L90 -433L90 -269L347 -269ZM999 -21L540 -21L540 -723L652 -723L652 -530L999 -530L999 -21ZM909 -269L909 -433L652 -433L652 -269L909 -269ZM1539 -21L1080 -21L1080 -723L1539 -723L1539 -625L1192 -625L1192 -269L1539 -269L1539 -21ZM459 1179L0 1179L0 477L112 477L112 670L459 670L459 1179ZM369 931L369 767L112 767L112 931L369 931ZM999 1179L540 1179L540 477L999 477L999 575L652 575L652 931L999 931L999 1179ZM1539 2379L1080 2379L1080 1677L1539 1677L1539 1775L1192 1775L1192 2131L1539 2131L1539 2379Z",
  },
  {
    name: "BaselineLeft with y_up",
    anchor: BaselineLeft,
    y_up: true,
    want_d: "M459 24L0 24L0 530L347 530L347 625L0 625L0 723L459 723L459 24ZM347 269L347 433L90 433L90 269L347 269ZM999 21L540 21L540 723L652 723L652 530L999 530L999 21ZM909 269L909 433L652 433L652 269L909 269ZM1539 21L1080 21L1080 723L1539 723L1539 625L1192 625L1192 269L1539 269L1539 21ZM459 -1179L0 -1179L0 -477L112 -477L112 -670L459 -670L459 -1179ZM369 -931L369 -767L112 -767L112 -931L369 -931ZM999 -1179L540 -1179L540 -477L999 -477L999 -575L652 -575L652 -931L999 -931L999 -1179ZM1539 -2379L1080 -2379L1080 -1677L1539 -1677L1539 -1775L1192 -1775L1192 -2131L1539 -2131L1539 -2379Z",
  },
  {
    name: "BaselineCenter",
    anchor: BaselineCenter,
    y_up: false,
    want_d: "M-310.5 -24L-769.5 -24L-769.5 -530L-422.5 -530L-422.5 -625L-769.5 -625L-769.5 -723L-310.5 -723L-310.5 -24ZM-422.5 -269L-422.5 -433L-679.5 -433L-679.5 -269L-422.5 -269ZM229.5 -21L-229.5 -21L-229.5 -723L-117.5 -723L-117.5 -530L229.5 -530L229.5 -21ZM139.5 -269L139.5 -433L-117.5 -433L-117.5 -269L139.5 -269ZM769.5 -21L310.5 -21L310.5 -723L769.5 -723L769.5 -625L422.5 -625L422.5 -269L769.5 -269L769.5 -21ZM-310.5 1179L-769.5 1179L-769.5 477L-657.5 477L-657.5 670L-310.5 670L-310.5 1179ZM-400.5 931L-400.5 767L-657.5 767L-657.5 931L-400.5 931ZM229.5 1179L-229.5 1179L-229.5 477L229.5 477L229.5 575L-117.5 575L-117.5 931L229.5 931L229.5 1179ZM769.5 2379L310.5 2379L310.5 1677L769.5 1677L769.5 1775L422.5 1775L422.5 2131L769.5 2131L769.5 2379Z",
  },
  {
    name: "BaselineCenter with y_up",
    anchor: BaselineCenter,
    y_up: true,
    want_d: "M-310.5 24L-769.5 24L-769.5 530L-422.5 530L-422.5 625L-769.5 625L-769.5 723L-310.5 723L-310.5 24ZM-422.5 269L-422.5 433L-679.5 433L-679.5 269L-422.5 269ZM229.5 21L-229.5 21L-229.5 723L-117.5 723L-117.5 530L229.5 530L229.5 21ZM139.5 269L139.5 433L-117.5 433L-117.5 269L139.5 269ZM769.5 21L310.5 21L310.5 723L769.5 723L769.5 625L422.5 625L422.5 269L769.5 269L769.5 21ZM-310.5 -1179L-769.5 -1179L-769.5 -477L-657.5 -477L-657.5 -670L-310.5 -670L-310.5 -1179ZM-400.5 -931L-400.5 -767L-657.5 -767L-657.5 -931L-400.5 -931ZM229.5 -1179L-229.5 -1179L-229.5 -477L229.5 -477L229.5 -575L-117.5 -575L-117.5 -931L229.5 -931L229.5 -1179ZM769.5 -2379L310.5 -2379L310.5 -1677L769.5 -1677L769.5 -1775L422.5 -1775L422.5 -2131L769.5 -2131L769.5 -2379Z",
  },
  {
    name: "BaselineRight",
    anchor: BaselineRight,
    y_up: false,
    want_d: "M-1080 -24L-1539 -24L-1539 -530L-1192 -530L-1192 -625L-1539 -625L-1539 -723L-1080 -723L-1080 -24ZM-1192 -269L-1192 -433L-1449 -433L-1449 -269L-1192 -269ZM-540 -21L-999 -21L-999 -723L-887 -723L-887 -530L-540 -530L-540 -21ZM-630 -269L-630 -433L-887 -433L-887 -269L-630 -269ZM0 -21L-459 -21L-459 -723L0 -723L0 -625L-347 -625L-347 -269L0 -269L0 -21ZM-1080 1179L-1539 1179L-1539 477L-1427 477L-1427 670L-1080 670L-1080 1179ZM-1170 931L-1170 767L-1427 767L-1427 931L-1170 931ZM-540 1179L-999 1179L-999 477L-540 477L-540 575L-887 575L-887 931L-540 931L-540 1179ZM0 2379L-459 2379L-459 1677L0 1677L0 1775L-347 1775L-347 2131L0 2131L0 2379Z",
  },
  {
    name: "BaselineRight with y_up",
    anchor: BaselineRight,
    y_up: true,
    want_d: "M-1080 24L-1539 24L-1539 530L-1192 530L-1192 625L-1539 625L-1539 723L-1080 723L-1080 24ZM-1192 269L-1192 433L-1449 433L-1449 269L-1192 269ZM-540 21L-999 21L-999 723L-887 723L-887 530L-540 530L-540 21ZM-630 269L-630 433L-887 433L-887 269L-630 269ZM0 21L-459 21L-459 723L0 723L0 625L-347 625L-347 269L0 269L0 21ZM-1080 -1179L-1539 -1179L-1539 -477L-1427 -477L-1427 -670L-1080 -670L-1080 -1179ZM-1170 -931L-1170 -767L-1427 -767L-1427 -931L-1170 -931ZM-540 -1179L-999 -1179L-999 -477L-540 -477L-540 -575L-887 -575L-887 -931L-540 -931L-540 -1179ZM0 -2379L-459 -2379L-459 -1677L0 -1677L0 -1775L-347 -1775L-347 -2131L0 -2131L0 -2379Z",
  },
  {
    name: "BottomLeft",
    anchor: BottomLeft,
    y_up: false,
    want_d: "M459 -2403L0 -2403L0 -2909L347 -2909L347 -3004L0 -3004L0 -3102L459 -3102L459 -2403ZM347 -2648L347 -2812L90 -2812L90 -2648L347 -2648ZM999 -2400L540 -2400L540 -3102L652 -3102L652 -2909L999 -2909L999 -2400ZM909 -2648L909 -2812L652 -2812L652 -2648L909 -2648ZM1539 -2400L1080 -2400L1080 -3102L1539 -3102L1539 -3004L1192 -3004L1192 -2648L1539 -2648L1539 -2400ZM459 -1200L0 -1200L0 -1902L112 -1902L112 -1709L459 -1709L459 -1200ZM369 -1448L369 -1612L112 -1612L112 -1448L369 -1448ZM999 -1200L540 -1200L540 -1902L999 -1902L999 -1804L652 -1804L652 -1448L999 -1448L999 -1200ZM1539 0L1080 0L1080 -702L1539 -702L1539 -604L1192 -604L1192 -248L1539 -248L1539 0Z",
  },
  {
    name: "BottomLeft with y_up",
    anchor: BottomLeft,
    y_up: true,
    want_d: "M459 2403L0 2403L0 2909L347 2909L347 3004L0 3004L0 3102L459 3102L459 2403ZM347 2648L347 2812L90 2812L90 2648L347 2648ZM999 2400L540 2400L540 3102L652 3102L652 2909L999 2909L999 2400ZM909 2648L909 2812L652 2812L652 2648L909 2648ZM1539 2400L1080 2400L1080 3102L1539 3102L1539 3004L1192 3004L1192 2648L1539 2648L1539 2400ZM459 1200L0 1200L0 1902L112 1902L112 1709L459 1709L459 1200ZM369 1448L369 1612L112 1612L112 1448L369 1448ZM999 1200L540 1200L540 1902L999 1902L999 1804L652 1804L652 1448L999 1448L999 1200ZM1539 0L1080 0L1080 702L1539 702L1539 604L1192 604L1192 248L1539 248L1539 0Z",
  },
  {
    name: "BottomCenter",
    anchor: BottomCenter,
    y_up: false,
    want_d: "M-310.5 -2403L-769.5 -2403L-769.5 -2909L-422.5 -2909L-422.5 -3004L-769.5 -3004L-769.5 -3102L-310.5 -3102L-310.5 -2403ZM-422.5 -2648L-422.5 -2812L-679.5 -2812L-679.5 -2648L-422.5 -2648ZM229.5 -2400L-229.5 -2400L-229.5 -3102L-117.5 -3102L-117.5 -2909L229.5 -2909L229.5 -2400ZM139.5 -2648L139.5 -2812L-117.5 -2812L-117.5 -2648L139.5 -2648ZM769.5 -2400L310.5 -2400L310.5 -3102L769.5 -3102L769.5 -3004L422.5 -3004L422.5 -2648L769.5 -2648L769.5 -2400ZM-310.5 -1200L-769.5 -1200L-769.5 -1902L-657.5 -1902L-657.5 -1709L-310.5 -1709L-310.5 -1200ZM-400.5 -1448L-400.5 -1612L-657.5 -1612L-657.5 -1448L-400.5 -1448ZM229.5 -1200L-229.5 -1200L-229.5 -1902L229.5 -1902L229.5 -1804L-117.5 -1804L-117.5 -1448L229.5 -1448L229.5 -1200ZM769.5 0L310.5 0L310.5 -702L769.5 -702L769.5 -604L422.5 -604L422.5 -248L769.5 -248L769.5 0Z",
  },
  {
    name: "BottomCenter with y_up",
    anchor: BottomCenter,
    y_up: true,
    want_d: "M-310.5 2403L-769.5 2403L-769.5 2909L-422.5 2909L-422.5 3004L-769.5 3004L-769.5 3102L-310.5 3102L-310.5 2403ZM-422.5 2648L-422.5 2812L-679.5 2812L-679.5 2648L-422.5 2648ZM229.5 2400L-229.5 2400L-229.5 3102L-117.5 3102L-117.5 2909L229.5 2909L229.5 2400ZM139.5 2648L139.5 2812L-117.5 2812L-117.5 2648L139.5 2648ZM769.5 2400L310.5 2400L310.5 3102L769.5 3102L769.5 3004L422.5 3004L422.5 2648L769.5 2648L769.5 2400ZM-310.5 1200L-769.5 1200L-769.5 1902L-657.5 1902L-657.5 1709L-310.5 1709L-310.5 1200ZM-400.5 1448L-400.5 1612L-657.5 1612L-657.5 1448L-400.5 1448ZM229.5 1200L-229.5 1200L-229.5 1902L229.5 1902L229.5 1804L-117.5 1804L-117.5 1448L229.5 1448L229.5 1200ZM769.5 0L310.5 0L310.5 702L769.5 702L769.5 604L422.5 604L422.5 248L769.5 248L769.5 0Z",
  },
  {
    name: "BottomRight",
    anchor: BottomRight,
    y_up: false,
    want_d: "M-1080 -2403L-1539 -2403L-1539 -2909L-1192 -2909L-1192 -3004L-1539 -3004L-1539 -3102L-1080 -3102L-1080 -2403ZM-1192 -2648L-1192 -2812L-1449 -2812L-1449 -2648L-1192 -2648ZM-540 -2400L-999 -2400L-999 -3102L-887 -3102L-887 -2909L-540 -2909L-540 -2400ZM-630 -2648L-630 -2812L-887 -2812L-887 -2648L-630 -2648ZM0 -2400L-459 -2400L-459 -3102L0 -3102L0 -3004L-347 -3004L-347 -2648L0 -2648L0 -2400ZM-1080 -1200L-1539 -1200L-1539 -1902L-1427 -1902L-1427 -1709L-1080 -1709L-1080 -1200ZM-1170 -1448L-1170 -1612L-1427 -1612L-1427 -1448L-1170 -1448ZM-540 -1200L-999 -1200L-999 -1902L-540 -1902L-540 -1804L-887 -1804L-887 -1448L-540 -1448L-540 -1200ZM0 0L-459 0L-459 -702L0 -702L0 -604L-347 -604L-347 -248L0 -248L0 0Z",
  },
  {
    name: "BottomRight with y_up",
    anchor: BottomRight,
    y_up: true,
    want_d: "M-1080 2403L-1539 2403L-1539 2909L-1192 2909L-1192 3004L-1539 3004L-1539 3102L-1080 3102L-1080 2403ZM-1192 2648L-1192 2812L-1449 2812L-1449 2648L-1192 2648ZM-540 2400L-999 2400L-999 3102L-887 3102L-887 2909L-540 2909L-540 2400ZM-630 2648L-630 2812L-887 2812L-887 2648L-630 2648ZM0 2400L-459 2400L-459 3102L0 3102L0 3004L-347 3004L-347 2648L0 2648L0 2400ZM-1080 1200L-1539 1200L-1539 1902L-1427 1902L-1427 1709L-1080 1709L-1080 1200ZM-1170 1448L-1170 1612L-1427 1612L-1427 1448L-1170 1448ZM-540 1200L-999 1200L-999 1902L-540 1902L-540 1804L-887 1804L-887 1448L-540 1448L-540 1200ZM0 0L-459 0L-459 702L0 702L0 604L-347 604L-347 248L0 248L0 0Z",
  },
  {
    name: "RatioXY(0.25, 0.25)",
    anchor: RatioXY(0.25, 0.25),
    y_up: false,
    want_d: "M74.25 -76.5L-384.75 -76.5L-384.75 -582.5L-37.75 -582.5L-37.75 -677.5L-384.75 -677.5L-384.75 -775.5L74.25 -775.5L74.25 -76.5ZM-37.75 -321.5L-37.75 -485.5L-294.75 -485.5L-294.75 -321.5L-37.75 -321.5ZM614.25 -73.5L155.25 -73.5L155.25 -775.5L267.25 -775.5L267.25 -582.5L614.25 -582.5L614.25 -73.5ZM524.25 -321.5L524.25 -485.5L267.25 -485.5L267.25 -321.5L524.25 -321.5ZM1154.25 -73.5L695.25 -73.5L695.25 -775.5L1154.25 -775.5L1154.25 -677.5L807.25 -677.5L807.25 -321.5L1154.25 -321.5L1154.25 -73.5ZM74.25 1126.5L-384.75 1126.5L-384.75 424.5L-272.75 424.5L-272.75 617.5L74.25 617.5L74.25 1126.5ZM-15.75 878.5L-15.75 714.5L-272.75 714.5L-272.75 878.5L-15.75 878.5ZM614.25 1126.5L155.25 1126.5L155.25 424.5L614.25 424.5L614.25 522.5L267.25 522.5L267.25 878.5L614.25 878.5L614.25 1126.5ZM1154.25 2326.5L695.25 2326.5L695.25 1624.5L1154.25 1624.5L1154.25 1722.5L807.25 1722.5L807.25 2078.5L1154.25 2078.5L1154.25 2326.5Z",
  },
  {
    name: "RatioXY(0.25, 0.25) with y_up",
    anchor: RatioXY(0.25, 0.25),
    y_up: true,
    want_d: "M74.25 76.5L-384.75 76.5L-384.75 582.5L-37.75 582.5L-37.75 677.5L-384.75 677.5L-384.75 775.5L74.25 775.5L74.25 76.5ZM-37.75 321.5L-37.75 485.5L-294.75 485.5L-294.75 321.5L-37.75 321.5ZM614.25 73.5L155.25 73.5L155.25 775.5L267.25 775.5L267.25 582.5L614.25 582.5L614.25 73.5ZM524.25 321.5L524.25 485.5L267.25 485.5L267.25 321.5L524.25 321.5ZM1154.25 73.5L695.25 73.5L695.25 775.5L1154.25 775.5L1154.25 677.5L807.25 677.5L807.25 321.5L1154.25 321.5L1154.25 73.5ZM74.25 -1126.5L-384.75 -1126.5L-384.75 -424.5L-272.75 -424.5L-272.75 -617.5L74.25 -617.5L74.25 -1126.5ZM-15.75 -878.5L-15.75 -714.5L-272.75 -714.5L-272.75 -878.5L-15.75 -878.5ZM614.25 -1126.5L155.25 -1126.5L155.25 -424.5L614.25 -424.5L614.25 -522.5L267.25 -522.5L267.25 -878.5L614.25 -878.5L614.25 -1126.5ZM1154.25 -2326.5L695.25 -2326.5L695.25 -1624.5L1154.25 -1624.5L1154.25 -1722.5L807.25 -1722.5L807.25 -2078.5L1154.25 -2078.5L1154.25 -2326.5Z",
  },
  {
    name: "RatioXY(0.25, 0.75)",
    anchor: RatioXY(0.25, 0.75),
    y_up: false,
    want_d: "M74.25 -1627.5L-384.75 -1627.5L-384.75 -2133.5L-37.75 -2133.5L-37.75 -2228.5L-384.75 -2228.5L-384.75 -2326.5L74.25 -2326.5L74.25 -1627.5ZM-37.75 -1872.5L-37.75 -2036.5L-294.75 -2036.5L-294.75 -1872.5L-37.75 -1872.5ZM614.25 -1624.5L155.25 -1624.5L155.25 -2326.5L267.25 -2326.5L267.25 -2133.5L614.25 -2133.5L614.25 -1624.5ZM524.25 -1872.5L524.25 -2036.5L267.25 -2036.5L267.25 -1872.5L524.25 -1872.5ZM1154.25 -1624.5L695.25 -1624.5L695.25 -2326.5L1154.25 -2326.5L1154.25 -2228.5L807.25 -2228.5L807.25 -1872.5L1154.25 -1872.5L1154.25 -1624.5ZM74.25 -424.5L-384.75 -424.5L-384.75 -1126.5L-272.75 -1126.5L-272.75 -933.5L74.25 -933.5L74.25 -424.5ZM-15.75 -672.5L-15.75 -836.5L-272.75 -836.5L-272.75 -672.5L-15.75 -672.5ZM614.25 -424.5L155.25 -424.5L155.25 -1126.5L614.25 -1126.5L614.25 -1028.5L267.25 -1028.5L267.25 -672.5L614.25 -672.5L614.25 -424.5ZM1154.25 775.5L695.25 775.5L695.25 73.5L1154.25 73.5L1154.25 171.5L807.25 171.5L807.25 527.5L1154.25 527.5L1154.25 775.5Z",
  },
  {
    name: "RatioXY(0.25, 0.75) with y_up",
    anchor: RatioXY(0.25, 0.75),
    y_up: true,
    want_d: "M74.25 1627.5L-384.75 1627.5L-384.75 2133.5L-37.75 2133.5L-37.75 2228.5L-384.75 2228.5L-384.75 2326.5L74.25 2326.5L74.25 1627.5ZM-37.75 1872.5L-37.75 2036.5L-294.75 2036.5L-294.75 1872.5L-37.75 1872.5ZM614.25 1624.5L155.25 1624.5L155.25 2326.5L267.25 2326.5L267.25 2133.5L614.25 2133.5L614.25 1624.5ZM524.25 1872.5L524.25 2036.5L267.25 2036.5L267.25 1872.5L524.25 1872.5ZM1154.25 1624.5L695.25 1624.5L695.25 2326.5L1154.25 2326.5L1154.25 2228.5L807.25 2228.5L807.25 1872.5L1154.25 1872.5L1154.25 1624.5ZM74.25 424.5L-384.75 424.5L-384.75 1126.5L-272.75 1126.5L-272.75 933.5L74.25 933.5L74.25 424.5ZM-15.75 672.5L-15.75 836.5L-272.75 836.5L-272.75 672.5L-15.75 672.5ZM614.25 424.5L155.25 424.5L155.25 1126.5L614.25 1126.5L614.25 1028.5L267.25 1028.5L267.25 672.5L614.25 672.5L614.25 424.5ZM1154.25 -775.5L695.25 -775.5L695.25 -73.5L1154.25 -73.5L1154.25 -171.5L807.25 -171.5L807.25 -527.5L1154.25 -527.5L1154.25 -775.5Z",
  },
  {
    name: "RatioXY(0.75, 0.25)",
    anchor: RatioXY(0.75, 0.25),
    y_up: false,
    want_d: "M-695.25 -76.5L-1154.25 -76.5L-1154.25 -582.5L-807.25 -582.5L-807.25 -677.5L-1154.25 -677.5L-1154.25 -775.5L-695.25 -775.5L-695.25 -76.5ZM-807.25 -321.5L-807.25 -485.5L-1064.25 -485.5L-1064.25 -321.5L-807.25 -321.5ZM-155.25 -73.5L-614.25 -73.5L-614.25 -775.5L-502.25 -775.5L-502.25 -582.5L-155.25 -582.5L-155.25 -73.5ZM-245.25 -321.5L-245.25 -485.5L-502.25 -485.5L-502.25 -321.5L-245.25 -321.5ZM384.75 -73.5L-74.25 -73.5L-74.25 -775.5L384.75 -775.5L384.75 -677.5L37.75 -677.5L37.75 -321.5L384.75 -321.5L384.75 -73.5ZM-695.25 1126.5L-1154.25 1126.5L-1154.25 424.5L-1042.25 424.5L-1042.25 617.5L-695.25 617.5L-695.25 1126.5ZM-785.25 878.5L-785.25 714.5L-1042.25 714.5L-1042.25 878.5L-785.25 878.5ZM-155.25 1126.5L-614.25 1126.5L-614.25 424.5L-155.25 424.5L-155.25 522.5L-502.25 522.5L-502.25 878.5L-155.25 878.5L-155.25 1126.5ZM384.75 2326.5L-74.25 2326.5L-74.25 1624.5L384.75 1624.5L384.75 1722.5L37.75 1722.5L37.75 2078.5L384.75 2078.5L384.75 2326.5Z",
  },
  {
    name: "RatioXY(0.75, 0.25) with y_up",
    anchor: RatioXY(0.75, 0.25),
    y_up: true,
    want_d: "M-695.25 76.5L-1154.25 76.5L-1154.25 582.5L-807.25 582.5L-807.25 677.5L-1154.25 677.5L-1154.25 775.5L-695.25 775.5L-695.25 76.5ZM-807.25 321.5L-807.25 485.5L-1064.25 485.5L-1064.25 321.5L-807.25 321.5ZM-155.25 73.5L-614.25 73.5L-614.25 775.5L-502.25 775.5L-502.25 582.5L-155.25 582.5L-155.25 73.5ZM-245.25 321.5L-245.25 485.5L-502.25 485.5L-502.25 321.5L-245.25 321.5ZM384.75 73.5L-74.25 73.5L-74.25 775.5L384.75 775.5L384.75 677.5L37.75 677.5L37.75 321.5L384.75 321.5L384.75 73.5ZM-695.25 -1126.5L-1154.25 -1126.5L-1154.25 -424.5L-1042.25 -424.5L-1042.25 -617.5L-695.25 -617.5L-695.25 -1126.5ZM-785.25 -878.5L-785.25 -714.5L-1042.25 -714.5L-1042.25 -878.5L-785.25 -878.5ZM-155.25 -1126.5L-614.25 -1126.5L-614.25 -424.5L-155.25 -424.5L-155.25 -522.5L-502.25 -522.5L-502.25 -878.5L-155.25 -878.5L-155.25 -1126.5ZM384.75 -2326.5L-74.25 -2326.5L-74.25 -1624.5L384.75 -1624.5L384.75 -1722.5L37.75 -1722.5L37.75 -2078.5L384.75 -2078.5L384.75 -2326.5Z",
  },
  {
    name: "RatioXY(0.75, 0.75)",
    anchor: RatioXY(0.75, 0.75),
    y_up: false,
    want_d: "M-695.25 -1627.5L-1154.25 -1627.5L-1154.25 -2133.5L-807.25 -2133.5L-807.25 -2228.5L-1154.25 -2228.5L-1154.25 -2326.5L-695.25 -2326.5L-695.25 -1627.5ZM-807.25 -1872.5L-807.25 -2036.5L-1064.25 -2036.5L-1064.25 -1872.5L-807.25 -1872.5ZM-155.25 -1624.5L-614.25 -1624.5L-614.25 -2326.5L-502.25 -2326.5L-502.25 -2133.5L-155.25 -2133.5L-155.25 -1624.5ZM-245.25 -1872.5L-245.25 -2036.5L-502.25 -2036.5L-502.25 -1872.5L-245.25 -1872.5ZM384.75 -1624.5L-74.25 -1624.5L-74.25 -2326.5L384.75 -2326.5L384.75 -2228.5L37.75 -2228.5L37.75 -1872.5L384.75 -1872.5L384.75 -1624.5ZM-695.25 -424.5L-1154.25 -424.5L-1154.25 -1126.5L-1042.25 -1126.5L-1042.25 -933.5L-695.25 -933.5L-695.25 -424.5ZM-785.25 -672.5L-785.25 -836.5L-1042.25 -836.5L-1042.25 -672.5L-785.25 -672.5ZM-155.25 -424.5L-614.25 -424.5L-614.25 -1126.5L-155.25 -1126.5L-155.25 -1028.5L-502.25 -1028.5L-502.25 -672.5L-155.25 -672.5L-155.25 -424.5ZM384.75 775.5L-74.25 775.5L-74.25 73.5L384.75 73.5L384.75 171.5L37.75 171.5L37.75 527.5L384.75 527.5L384.75 775.5Z",
  },
  {
    name: "RatioXY(0.75, 0.75) with y_up",
    anchor: RatioXY(0.75, 0.75),
    y_up: true,
    want_d: "M-695.25 1627.5L-1154.25 1627.5L-1154.25 2133.5L-807.25 2133.5L-807.25 2228.5L-1154.25 2228.5L-1154.25 2326.5L-695.25 2326.5L-695.25 1627.5ZM-807.25 1872.5L-807.25 2036.5L-1064.25 2036.5L-1064.25 1872.5L-807.25 1872.5ZM-155.25 1624.5L-614.25 1624.5L-614.25 2326.5L-502.25 2326.5L-502.25 2133.5L-155.25 2133.5L-155.25 1624.5ZM-245.25 1872.5L-245.25 2036.5L-502.25 2036.5L-502.25 1872.5L-245.25 1872.5ZM384.75 1624.5L-74.25 1624.5L-74.25 2326.5L384.75 2326.5L384.75 2228.5L37.75 2228.5L37.75 1872.5L384.75 1872.5L384.75 1624.5ZM-695.25 424.5L-1154.25 424.5L-1154.25 1126.5L-1042.25 1126.5L-1042.25 933.5L-695.25 933.5L-695.25 424.5ZM-785.25 672.5L-785.25 836.5L-1042.25 836.5L-1042.25 672.5L-785.25 672.5ZM-155.25 424.5L-614.25 424.5L-614.25 1126.5L-155.25 1126.5L-155.25 1028.5L-502.25 1028.5L-502.25 672.5L-155.25 672.5L-155.25 424.5ZM384.75 -775.5L-74.25 -775.5L-74.25 -73.5L384.75 -73.5L384.75 -171.5L37.75 -171.5L37.75 -527.5L384.75 -527.5L384.75 -775.5Z",
  },
]

test "gen_path on test_cases" {
  for tc in test_cases {
    let got = nullpointer.gen_path!(
      "ABC\nBC\rC",
      anchor=tc.anchor,
      y_up=tc.y_up,
    )
    let bbox = @fonts.glyph_bbox!(got.d)
    try {
      assert_eq!(got.d, tc.want_d)
      assert_eq!(got.gerber_lp, "dcdcddcdd")
      assert_eq!(got.char, "ABC\nBC\rC")
      assert_eq!(got.xmin, bbox.min.x)
      assert_eq!(got.ymin, bbox.min.y)
      assert_eq!(got.xmax, bbox.max.x)
      assert_eq!(got.ymax, bbox.max.y)
    } catch {
      @fonts.FontError(e) => println("test case '\{tc.name}' failure: \{e}")
      e => {
        println("test case '\{tc.name}' failure")
        raise e
      }
    }

    //
    let path = @fonts.Path::from_glyph!(got)
    let got2 = path.to_glyph()
    try {
      assert_eq!(path.char, "ABC\nBC\rC")
      assert_eq!(path.xmin, bbox.min.x)
      assert_eq!(path.ymin, bbox.min.y)
      assert_eq!(path.xmax, bbox.max.x)
      assert_eq!(path.ymax, bbox.max.y)
      assert_eq!(got2.d, tc.want_d)
      assert_eq!(got2.gerber_lp, "dcdcddcdd")
      assert_eq!(got2.char, "ABC\nBC\rC")
      assert_eq!(got2.xmin, bbox.min.x)
      assert_eq!(got2.ymin, bbox.min.y)
      assert_eq!(got2.xmax, bbox.max.x)
      assert_eq!(got2.ymax, bbox.max.y)
    } catch {
      @fonts.FontError(e) => println("test case '\{tc.name}' failure: \{e}")
      e => {
        println("test case '\{tc.name}' failure")
        raise e
      }
    }
  }
}
